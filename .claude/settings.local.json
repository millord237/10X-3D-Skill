{
  "permissions": {
    "allow": [
      "Bash(python -c \"\ncontent = ''''''#!/usr/bin/env python3\n\"\"\"\"\"\"\nAgent 2: Judge Agent\n\nResponsible for reviewing and validating extracted specifications.\nCompares extraction against the original image and validation results.\n\"\"\"\"\"\"\n\nfrom typing import Dict, List, Any, Optional\nfrom dataclasses import dataclass\n\n\n@dataclass\nclass ValidationResult:\n    \"\"\"\"\"\"Result of a single validation check.\"\"\"\"\"\"\n    check_name: str\n    passed: bool\n    message: str\n    severity: str = \"\"error\"\"\n\n\n@dataclass\nclass Judgment:\n    \"\"\"\"\"\"Complete judgment on an extraction.\"\"\"\"\"\"\n    approved: bool\n    confidence: float\n    validations: List[ValidationResult]\n    feedback: Dict[str, Any]\n    iteration: int\n\n\nclass JudgeAgent:\n    \"\"\"\"\"\"\n    Judge Agent for validating glass specifications.\n    \n    This agent:\n    - Reviews extraction accuracy\n    - Compares against original image\n    - Validates mathematical consistency\n    - Provides correction feedback\n    \"\"\"\"\"\"\n    \n    def __init__\\(self\\):\n        \"\"\"\"\"\"Initialize the Judge Agent.\"\"\"\"\"\"\n        self.review_history: List[Judgment] = []\n        self.iteration: int = 0\n    \n    def review\\(\n        self,\n        extraction: Dict[str, Any],\n        validation_results: Dict[str, bool]\n    \\) -> Dict[str, Any]:\n        \"\"\"\"\"\"\n        Review an extraction and provide judgment.\n        \n        Args:\n            extraction: Extracted specifications dictionary\n            validation_results: Results from Python validation functions\n        \n        Returns:\n            Dictionary containing approval status and feedback\n        \"\"\"\"\"\"\n        self.iteration += 1\n        validations = []\n        feedback = {}\n        \n        # Check Python validation results\n        if not validation_results.get\\(\"\"section_valid\"\", False\\):\n            validations.append\\(ValidationResult\\(\n                check_name=\"\"section_positions\"\",\n                passed=False,\n                message=\"\"Section positions do not sum to total width\"\",\n                severity=\"\"error\"\"\n            \\)\\)\n            feedback[\"\"section_errors\"\"] = self._analyze_section_errors\\(extraction\\)\n        \n        if not validation_results.get\\(\"\"hole_valid\"\", False\\):\n            validations.append\\(ValidationResult\\(\n                check_name=\"\"hole_positions\"\",\n                passed=False,\n                message=\"\"Hole positions outside panel boundaries\"\",\n                severity=\"\"error\"\"\n            \\)\\)\n            feedback[\"\"hole_errors\"\"] = self._analyze_hole_errors\\(extraction\\)\n        \n        if not validation_results.get\\(\"\"feasibility\"\", False\\):\n            validations.append\\(ValidationResult\\(\n                check_name=\"\"geometric_feasibility\"\",\n                passed=False,\n                message=\"\"Geometry not feasible for manufacturing\"\",\n                severity=\"\"error\"\"\n            \\)\\)\n        \n        # Determine overall approval\n        error_count = sum\\(1 for v in validations if not v.passed and v.severity == \"\"error\"\"\\)\n        approved = error_count == 0\n        \n        # Calculate confidence\n        total_checks = max\\(len\\(validations\\), 1\\)\n        passed_checks = sum\\(1 for v in validations if v.passed\\)\n        confidence = passed_checks / total_checks\n        \n        return {\n            \"\"approved\"\": approved,\n            \"\"confidence\"\": confidence,\n            \"\"feedback\"\": feedback,\n            \"\"iteration\"\": self.iteration,\n            \"\"error_count\"\": error_count\n        }\n    \n    def _analyze_section_errors\\(self, extraction: Dict[str, Any]\\) -> List[Dict]:\n        \"\"\"\"\"\"Analyze section errors and suggest corrections.\"\"\"\"\"\"\n        errors = []\n        sections = extraction.get\\(\"\"sections\"\", []\\)\n        total_width = extraction.get\\(\"\"dimensions\"\", {}\\).get\\(\"\"width\"\", 0\\)\n        \n        if sections:\n            section_sum = sum\\(s.get\\(\"\"width\"\", 0\\) for s in sections\\)\n            if abs\\(section_sum - total_width\\) > 0.1:\n                errors.append\\({\n                    \"\"type\"\": \"\"width_mismatch\"\",\n                    \"\"expected\"\": total_width,\n                    \"\"actual\"\": section_sum\n                }\\)\n        return errors\n    \n    def _analyze_hole_errors\\(self, extraction: Dict[str, Any]\\) -> List[Dict]:\n        \"\"\"\"\"\"Analyze hole position errors.\"\"\"\"\"\"\n        errors = []\n        holes = extraction.get\\(\"\"holes\"\", []\\)\n        dims = extraction.get\\(\"\"dimensions\"\", {}\\)\n        width = dims.get\\(\"\"width\"\", 0\\)\n        height = dims.get\\(\"\"height\"\", 0\\)\n        min_edge = 25.0\n        \n        for i, hole in enumerate\\(holes\\):\n            x = hole.get\\(\"\"x\"\", 0\\)\n            y = hole.get\\(\"\"y\"\", 0\\)\n            d = hole.get\\(\"\"diameter\"\", 0\\)\n            r = d / 2\n            \n            issues = []\n            if x - r < min_edge:\n                issues.append\\(\"\"Too close to left edge\"\"\\)\n            if x + r > width - min_edge:\n                issues.append\\(\"\"Too close to right edge\"\"\\)\n            if y - r < min_edge:\n                issues.append\\(\"\"Too close to bottom edge\"\"\\)\n            if y + r > height - min_edge:\n                issues.append\\(\"\"Too close to top edge\"\"\\)\n            \n            if issues:\n                errors.append\\({\"\"index\"\": i, \"\"issues\"\": issues}\\)\n        \n        return errors\n    \n    def get_review_summary\\(self\\) -> Dict[str, Any]:\n        \"\"\"\"\"\"Get summary of all reviews.\"\"\"\"\"\"\n        return {\n            \"\"total_reviews\"\": len\\(self.review_history\\),\n            \"\"approval_rate\"\": sum\\(1 for j in self.review_history if j.approved\\) / len\\(self.review_history\\) if self.review_history else 0\n        }\n''''''\n\nwith open\\(''C:/Users/Anit/Downloads/OA-Glass-Manuafacture/scripts/agent2_judge.py'', ''w'', encoding=''utf-8''\\) as f:\n    f.write\\(content\\)\nprint\\(''Created agent2_judge.py''\\)\n\")",
      "Bash(python:*)",
      "WebSearch",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:leancrew.com)",
      "Bash(move:*)",
      "WebFetch(domain:altersquare.io)",
      "Bash(pip install:*)",
      "Bash(tree:*)",
      "Bash(ls:*)",
      "Bash(start \"\" \"C:/Users/Anit/Downloads/OA-3D-Skill/outputs/Glass-Skill-2/glass_3d_model.html\")",
      "Bash(start \"\" \"C:\\\\Users\\\\Anit\\\\Downloads\\\\OA-3D-Skill\\\\outputs\\\\Glass-Skill-3\\\\glass_3d_model.html\")"
    ]
  }
}
